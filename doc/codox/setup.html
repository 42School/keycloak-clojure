<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Setup Keycloak</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/github.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h1><a href="index.html"><span class="project-title"><span class="project-name">keycloak-clojure</span> <span class="project-version">1.14.4</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="concepts.html"><div class="inner"><span>Security Concepts</span></div></a></li><li class="depth-1  current"><a href="setup.html"><div class="inner"><span>Setup Keycloak</span></div></a></li><li class="depth-1 "><a href="admin.html"><div class="inner"><span>Administrative tasks</span></div></a></li><li class="depth-1 "><a href="frontend.html"><div class="inner"><span>Securing a frontend</span></div></a></li><li class="depth-1 "><a href="backend.html"><div class="inner"><span>Securing a backend</span></div></a></li><li class="depth-1 "><a href="howtos.html"><div class="inner"><span>HOWTOs</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>keycloak</span></div></div></li><li class="depth-2 branch"><a href="keycloak.admin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>admin</span></div></a></li><li class="depth-2 branch"><a href="keycloak.authn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>authn</span></div></a></li><li class="depth-2 branch"><a href="keycloak.authz.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>authz</span></div></a></li><li class="depth-2 branch"><a href="keycloak.backend.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>backend</span></div></a></li><li class="depth-2 branch"><a href="keycloak.bean.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bean</span></div></a></li><li class="depth-2 branch"><a href="keycloak.cookies.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cookies</span></div></a></li><li class="depth-2 branch"><a href="keycloak.deployment.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deployment</span></div></a></li><li class="depth-2 branch"><a href="keycloak.meta.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>meta</span></div></a></li><li class="depth-2 branch"><a href="keycloak.starter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>starter</span></div></a></li><li class="depth-2 branch"><a href="keycloak.user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li><li class="depth-2 branch"><a href="keycloak.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2"><a href="keycloak.vault.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vault</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#setup-keycloak" name="setup-keycloak"></a>Setup Keycloak</h1>
<p>Keycloak comes vith <a href="https://www.keycloak.org/getting-started">various way of running it</a>: Bare server, Docker, Kubernetes, OpenShift, etc.. <a href="https://www.keycloak.org/docs/latest/server_installation/index.html#guide-overview">Keycloak server installation and configuration documentation</a> is excellent. Keycloak needs a database to run and offers several choices (Oracle, SQL Server, PostgreSQL, MySQL), by default it uses an H2 embedded database. I choose to run Keycloak with Postgres as it’s easier to investigate data in a Postgres DB and it’s now very frequent that I choose Postgres for my persistence needs.</p>
<h2><a href="#docker-compose-with-postgres" name="docker-compose-with-postgres"></a>Docker-compose with Postgres</h2>
<p>During development, I choose <a href="https://docs.docker.com/compose/">Docker Compose</a> to run Postgres alongside Keycloak, the repository holds a <code>docker-compose.yml</code> file to easily starts a Keycloak standalone instance persisting data in a Postgres DB. </p>
<p>To start Keycloak with Postgres:</p>
<ul>
  <li><a href="https://docs.docker.com/compose/install/">install Docker Compose</a></li>
  <li>Clone this repo: <code>git clone git@github.com:jgrodziski/keycloak-clojure.git</code></li>
  <li>and execute: <code>docker-compose up</code> (by the way go check that <a href="https://gist.github.com/jgrodziski/9ed4a17709baad10dbcd4530b60dfcbb">gist of useful docker aliases</a>)</li>
  <li>you should now have two running containers: Keycloak and Postgres (check with <code>docker ps</code>)</li>
  <li>the Keycloak administration console is now available at <a href="http://localhost:8090">http://localhost:8090</a></li>
</ul></div></div></div></body></html>